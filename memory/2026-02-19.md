# 2026-02-19

## GeoReview (бывший Wall of Love)

### Домен и SSL
- Купен домен **georeview.ru**, привязан к серверу 89.169.2.143 через Timeweb
- SSL сертификат установлен (certbot, до 2026-05-20), автопродление настроено
- Nginx server_name обновлён: `89.169.2.143 georeview.ru www.georeview.ru`

### Полный редизайн лендинга
- Переписал landing с нуля: Inter шрифт, slate-900 монохром (Apple-стиль), #FAFAFA фон
- SVG логотип "Trust Stack" (3 изометрических слоя: красный/зелёный/синий) + текст Geo|Review
- Компоненты: Navbar, Hero (90vh, staggered floating cards), Widget Demos (tabs: carousel/grid/list/badge), Dark Widget Showcase, How It Works, Features (6 карточек), Pricing, FAQ, Stats, CTA
- Widget card exact DOM: 24px radius, avatar 40px, uppercase date 11px, line-clamp-4, source icon circle
- Dark variant карточек для тёмных сайтов
- **Баг с reveal анимациями**: при клике "Смотреть демо" (#demos) элементы ниже оставались invisible (opacity:0). Фикс: при клике на anchor-ссылки вызывается showAll(), также checkReveals проверяет offsetTop vs scrollY+innerHeight+150

### Scoutly (Timly HR) — баг синхронизации вакансий
- Михаил жаловался: синхронизация завершается с 0 вакансий/0 откликов, хотя вакансии есть
- **Причина**: В `sync_jobs.py` функция `_upsert_vacancy` использовала модель `User`, но **импорт отсутствовал** (`from app.models.user import User`). NameError тихо ловился в try/except.
- **Фикс**: Добавил импорт через `docker exec -u root ... sed -i`. Перезапустил контейнер.
- ⚠️ Фикс в контейнере — при пересборке образа нужно добавить в исходники!
- У employer "Перфект" (Михаил, 850214cb) 4 активных вакансии, API их отдаёт нормально
- Users в Scoutly БД: gptgeek (employer 5746165), HRD@perfect-time.ru (employer 5249108), и др.

### Slate-900 монохром редизайн (полный)
- **Auth страницы** (login/register): переписаны — Inter, #FAFAFA, slate-900 кнопки, GeoReview branding, 24px radius
- **Dashboard layout**: кастомный CSS (gr-sidebar классы), Inter, GeoReview + "Отзывы с карт", монохромный sidebar
- **Dashboard pages** (show/index/new/_form): все amber/orange → slate-900 через sed
- **Widget.js полностью переделан**: Inter через `<link>` в Shadow DOM, #FFD503 звёзды (Yandex-стиль), 24px radius, #E5E7EB borders, source icons теперь PNG (yandex-maps-logo.png, 2gis-icon.png) вместо текстовых "Я"/"2"
- Widget поддерживает 2 формата embed: `[data-wol-widget]` и `<script data-slug> + <div id>`
- Fallback host обновлён: walloflove.ru → georeview.ru
- Nginx: добавлен `charset utf-8` в оба server блока

### Важные технические уроки
- **Turbo Drive + DOMContentLoaded**: НЕ работает при навигации. Решение: IIFE `(function(){...})()`
- **Shadow DOM + @import**: encoding баги. Решение: `document.createElement('link')`
- **Puma EADDRINUSE**: systemctl restart недостаточно. Нужен disable→stop→kill port→wait→enable→start
- **georeview-logo.svg**: 404 на сервере, но fallback `onerror="this.style.display='none'"` скрывает

### Agent Feed
- Лента активна, 11 постов за день (каждые ~2ч по cron)
- Только мои посты + 1 от kiir ("hi!"). Других участников пока нет.
- API: Bearer auth, endpoint /feed?limit=N
